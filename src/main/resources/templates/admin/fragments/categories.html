<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>
	<section th:fragment="categories" class="content-section">
		<div class="section-header">
			<h2><i class="fas fa-tags"></i> Categorías</h2>
			<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#categoryModalNew">
				<i class="fas fa-plus"></i> Nueva Categoría
			</button>
		</div>

		<table class="table table-hover">
			<thead>
				<tr>
					<th>ID</th>
					<th>Nombre</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="categoria : ${categorias}">
					<td th:text="${categoria.id}">1</td>
					<td th:text="${categoria.nombre}">Categoría</td>
					<td>
						<!-- Editar -->
						<button class="btn btn-sm btn-warning" data-bs-toggle="modal"
							th:attr="data-bs-target='#categoryModalEdit' + ${categoria.id}">
							<i class="fas fa-edit"></i>
						</button>

						<!-- Eliminar -->
						<a th:href="@{/admin/categorias/eliminar/{id}(id=${categoria.id})}"
							class="btn btn-sm btn-danger" onclick="return confirm('¿Eliminar esta categoría?')">
							<i class="fas fa-trash"></i>
						</a>
					</td>
				</tr>
			</tbody>
		</table>

		<!-- Modal Nueva Categoría -->
		<div class="modal fade" id="categoryModalNew" tabindex="-1">
			<div class="modal-dialog">
				<form th:action="@{/admin/categorias/guardar}" method="post" class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Nueva Categoría</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label>Nombre</label>
							<input type="text" name="nombre" class="form-control" required>
						</div>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary">Guardar</button>
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					</div>
				</form>
			</div>
		</div>

		<!-- Modales Editar -->
		<div th:each="categoria : ${categorias}">
			<div class="modal fade" th:id="'categoryModalEdit' + ${categoria.id}" tabindex="-1">
				<div class="modal-dialog">
					<form th:action="@{/admin/categorias/guardar}" method="post" class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Editar Categoría</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
						</div>
						<div class="modal-body">
							<input type="hidden" name="id" th:value="${categoria.id}">
							<div class="mb-3">
								<label>Nombre</label>
								<input type="text" name="nombre" th:value="${categoria.nombre}" class="form-control"
									required>
							</div>
						</div>
						<div class="modal-footer">
							<button type="submit" class="btn btn-primary">Guardar</button>
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</section>
</body>

</html>