<section th:fragment="inicio-caja" class="content-section">
	<div class="dashboard-container">
		<!-- Header de la sección -->
		<div class="section-header caja-dashboard-header">
			<div class="caja-dashboard-left">
				<h2><i class="fas fa-cash-register"></i> Panel principal</h2>
				<p class="caja-dashboard-subtitle">Resumen general de la caja</p>
			</div>
			<div class="caja-dashboard-right">
				<div class="date-badge caja-date-badge" title="Fecha y hora actuales">
					<i class="fas fa-calendar-alt"></i>
					<span id="dashboardDate"></span>
				</div>
			</div>
		</div>

		<!-- Tarjetas resumen -->
		<div class="stats-grid">
			<div class="stat-card">
				<div class="stat-icon bg-primary"><i class="fas fa-dollar-sign"></i></div>
				<div class="stat-info">
					<h3 th:text="'$' + ${#numbers.formatDecimal(ingresosHoy, 1, 'COMMA', 2, 'POINT')}">$0.00</h3>
					<p>Ventas Hoy</p>
					<small th:text="${ventasHoy} + ' ventas'">0 ventas</small>
				</div>
			</div>

			<div class="stat-card">
				<div class="stat-icon bg-success"><i class="fas fa-list"></i></div>
				<div class="stat-info">
					<h3 th:text="'$' + ${#numbers.formatDecimal(ingresosTotales, 1, 'COMMA', 2, 'POINT')}">$0.00</h3>
					<p>Ingresos Totales</p>
					<small th:text="${totalVentas} + ' ventas · ' + ${ventasCanceladas} + ' canceladas'">0 ventas</small>
				</div>
			</div>

			<div class="stat-card">
				<div class="stat-icon bg-warning"><i class="fas fa-undo"></i></div>
				<div class="stat-info">
					<h3 th:text="${pedidosPendientes}">0</h3>
					<p>Pedidos Pendientes</p>
					<small>Pedidos en proceso</small>
				</div>
			</div>

			<div class="stat-card">
				<div class="stat-icon bg-danger"><i class="fas fa-lock"></i></div>
				<div class="stat-info">
					<h3 th:text="${totalUsuarios}">0</h3>
					<p>Usuarios</p>
					<small>Activos en el sistema</small>
				</div>
			</div>
		</div>

		<!-- Analítica: Gráficas + Actividad reciente lado a lado (copiado de admin) -->
		<div class="analytics-row" style="display:flex; gap:16px; align-items:flex-start; margin-top: 1.5rem;">
			<!-- Gráficas -->
			<div class="charts-section" style="flex: 0 0 70%; max-width:70%;">
				<div class="charts-header">
					<h3><i class="fas fa-chart-pie"></i> Estadísticas detalladas</h3>
					<div class="chart-filters">
						<div class="chart-filter-btn active" data-filter="products">Productos</div>
						<div class="chart-filter-btn" data-filter="categories">Categorías</div>
						<div class="chart-filter-btn" data-filter="events">Eventos</div>
						<div class="chart-filter-btn" data-filter="users">Usuarios</div>
						<div class="chart-filter-btn" data-filter="mesas">Mesas</div>
					</div>
				</div>

				<!-- Productos -->
				<div class="charts-container active" id="charts-products">
					<div class="charts-grid">
						<div class="chart-card full-width">
							<div class="chart-title"><i class="fas fa-chart-bar"></i> Productos por Categoría</div>
							<canvas id="chartCategorias2" class="chart-canvas"></canvas>
						</div>
					</div>
				</div>

				<!-- Categorías -->
				<div class="charts-container" id="charts-categories">
					<div class="charts-grid">
						<div class="chart-card full-width">
							<div class="chart-title"><i class="fas fa-chart-pie"></i> Distribución de Productos por Categoría</div>
							<canvas id="chartCategorias3" class="chart-canvas"></canvas>
						</div>
					</div>
				</div>

				<!-- Eventos -->
				<div class="charts-container" id="charts-events">
					<div class="charts-grid">
						<div class="chart-card full-width">
							<div class="chart-title"><i class="fas fa-chart-line"></i> Eventos por Mes</div>
							<canvas id="chartEventos2" class="chart-canvas"></canvas>
						</div>
					</div>
				</div>

				<!-- Usuarios -->
				<div class="charts-container" id="charts-users">
					<div class="charts-grid">
						<div class="chart-card full-width">
							<div class="chart-title"><i class="fas fa-user-friends"></i> Usuarios por Rol</div>
							<canvas id="chartUsuarios2" class="chart-canvas"></canvas>
						</div>
					</div>
				</div>

				<!-- Mesas -->
				<div class="charts-container" id="charts-mesas">
					<div class="charts-grid">
						<div class="chart-card full-width">
							<div class="chart-title"><i class="fas fa-chair"></i> Estado de Mesas</div>
							<canvas id="chartMesas2" class="chart-canvas"></canvas>
						</div>
					</div>
				</div>
			</div>

			<!-- Actividad reciente -->
			<section class="activity-section" aria-labelledby="recent-activity-title" style="flex: 0 0 30%; max-width:30%;">
				<div class="activity-header">
					<h3 id="recent-activity-title"><i class="fas fa-bolt"></i> Actividad reciente</h3>
					<div class="activity-controls" style="display:flex;align-items:center;gap:8px;">
						<button class="carousel-btn" id="activityPrev" title="Anterior"><i class="fas fa-chevron-left"></i></button>
						<span id="activityPageLabel" style="margin:0;">Página 1</span>
						<button class="carousel-btn" id="activityNext" title="Siguiente"><i class="fas fa-chevron-right"></i></button>
					</div>
				</div>
				<div id="recentActivity" class="activity-list" aria-live="polite">
					<div class="empty-state">
						<i class="fas fa-inbox"></i>
						<h4>Sin actividad</h4>
						<p>Aquí verás los últimos movimientos del sistema.</p>
					</div>
				</div>
			</section>
		</div>
	</div>
</section>